<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h2>Liste des produits</h2>
    <ul>
        <li>
            <h3>Ours en peluche faits à la main</h3>
        </li>
        <ul id="teddies-list"></ul>
    </ul>

    <script>
        const teddiesListElement = document.getElementById("teddies-list");

        // Créer la liste HTML des produits d'une catégorie et l'envoie à la cible sur le DOM
        function completeList(data, targetElement) {
            data.forEach((element) => {
                const liElement = document.createElement("li");
                liElement.innerHTML = `<a href="/front-end/produits.html?id=${element._id}">
                    <h4>${element.name}</h4>
                </a>
                <img src="${element.imageUrl}" alt="${element.name}"/>
                <h5>${element.price}</h5>
                <p>${element.description}</p>`;
                console.log(element);

                targetElement.appendChild(liElement);
            });
        }

        // On récupère les nounours et on les ajoutes au DOM
        fetch("/api/teddies")
            .then(function (res) {
                if (res.ok) {
                    return res.json();
                }
            })
            .then(function (data) {
                completeList(data, teddiesListElement);
            })
            .catch(function (err) {
                console.error("Erreur", error);
            });
    </script>
</body>

</html>