<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>liste-produits</title>
</head>

<body>
    <header>
        <a href="/front-end/panier.html">Panier</a>
    </header>

    <main>
        <h1>Ours en peluche faits à la main</h1>
        <ul>
            <li id="teddies-list"></li>
        </ul>
    </main>

    <footer>

    </footer>

    <script>
        const teddiesListElement = document.getElementById("teddies-list");

        // Créer la liste HTML des produits d'une catégorie et l'envoie à la cible sur le DOM
        function completeList(data, targetElement) {
            data.forEach((element) => {
                const liElement = document.createElement("li");
                liElement.innerHTML = `<a href="/front-end/produit.html?id=${element._id}">
                    <h3>${element.name}</h3>
                </a>
                <img src="${element.imageUrl}" alt="${element.name}"/>
                <h4>${element.price / 100} € </h4>
                <p>Coloris aux choix</p>`;
                console.log(element);

                targetElement.appendChild(liElement);
            });
        }

        // On récupère les nounours et on les ajoutes au DOM
        fetch("/api/teddies")
            .then(function (res) {
                if (res.ok) {
                    return res.json();
                }
            })
            .then(function (data) {
                completeList(data, teddiesListElement);
            })
            .catch(function (err) {
                console.error("Erreur", error);
            });
    </script>
</body>

</html>